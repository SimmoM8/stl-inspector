<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>STL Inspector</title>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
      }
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./styles/app.css" />
</head>

<body>
    <div class="app">
        <div class="rail">
            <button class="active" data-panel="issues" title="Issues" aria-label="Issues"><i class="bi bi-exclamation-triangle"></i></button>
            <button data-panel="components" title="Components" aria-label="Components"><i class="bi bi-boxes"></i></button>
            <button data-panel="tools" title="Tools" aria-label="Tools"><i class="bi bi-tools"></i></button>
            <button data-panel="settings" title="Settings" aria-label="Settings"><i class="bi bi-gear"></i></button>
        </div>

        <div class="context">
            <div class="card" id="summaryCard">
                <h4>Summary</h4>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="label">Watertight</span>
                        <span class="value" id="summaryWatertight">–</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Components</span>
                        <span class="value" id="summaryComponents">–</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Faces</span>
                        <span class="value" id="summaryFaces">–</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Vertices</span>
                        <span class="value" id="summaryVertices">–</span>
                    </div>
                </div>
            </div>


            <div class="card panel" id="panel-issues">
                <h4>Issues</h4>
                <div class="issues-controls">
                    <input id="issuesSearch" type="search" placeholder="Search issues..." />
                    <div class="issues-filter" id="issuesFilter">
                        <button class="active" data-filter="all" title="Show all issues" aria-label="Show all issues">All</button>
                        <button data-filter="error" title="Show error issues" aria-label="Show error issues">Error</button>
                        <button data-filter="warning" title="Show warning issues" aria-label="Show warning issues">Warning</button>
                        <button data-filter="info" title="Show info issues" aria-label="Show info issues">Info</button>
                    </div>
                </div>
                <div id="issues"></div>
                <div id="issueDetails">
                    <h5 id="issueTitle">No issue selected</h5>
                    <div class="meta" id="issueMeta"></div>
                    <div class="page-label" id="issuePageLabel"></div>
                    <div class="indices" id="issueIndices"></div>
                    <button id="showAllBtn">Show all</button>
                </div>
            </div>

            <div class="card panel hidden" id="panel-components">
                <h4>Components</h4>
                <div id="componentsControls">
                    <button id="showAllComponentsBtn">Show all</button>
                    <label id="autoLargestLabel">
                        <input type="checkbox" id="autoLargest">
                        Auto largest
                    </label>
                </div>
                <div id="componentsList"></div>
            </div>

            <div class="card panel hidden" id="panel-tools">
                <h4>Tools</h4>
                <div class="meta">Reserved for future tools.</div>
            </div>

            <div class="card panel hidden" id="panel-settings">
                <h4>Settings</h4>
                <div class="control-row">
                    <span>Edge threshold</span>
                    <input type="range" id="edgeThreshold" min="0" max="60" value="12">
                </div>
                <div class="control-row">
                    <span>Exposure</span>
                    <input type="range" id="exposureSlider" min="0.2" max="3" step="0.05" value="1.9">
                </div>
                <div class="control-row">
                    <button id="resetViewBtn">Reset view settings</button>
                </div>
            </div>

            <button id="clearBtn">Clear highlight</button>
            <div id="statusBubble"></div>
        </div>

        <div class="viewer-wrap">
            <div id="viewer"></div>
            <div id="emptyState" class="empty-state">Upload an STL to begin</div>
            <div class="upload-panel">
                <input type="file" id="fileInput" accept=".stl" />
                <label for="fileInput" title="Upload STL"><i class="bi bi-upload"></i> Upload STL</label>
            </div>
            <div class="tool-column" id="cameraToolbar" style="right:16px; top:64px;">
                <button id="frameBtn" title="Frame object" aria-label="Frame object"><i class="bi bi-bounding-box-circles"></i></button>
                <button id="centerBtn" title="Center on grid" aria-label="Center on grid"><i class="bi bi-arrows-move"></i></button>
                <button id="focusBtn" title="Focus current" aria-label="Focus current"><i class="bi bi-bullseye"></i></button>
            </div>
            <div class="tool-column hidden" id="inspectToolbar" style="right:16px; top:214px;">
                <button id="prevBtn" title="Previous (step)" aria-label="Previous item"><i class="bi bi-skip-backward"></i></button>
                <button id="nextBtn" title="Next (step)" aria-label="Next item"><i class="bi bi-skip-forward"></i></button>
                <button id="modeToggleBtn" title="Toggle step/all" aria-label="Toggle step or all"><i class="bi bi-shuffle"></i></button>
                <button id="highlightToggleBtn" title="Toggle highlights" aria-label="Toggle highlights"><i class="bi bi-lightbulb"></i></button>
                <button id="clearToolbarBtn" title="Clear selection" aria-label="Clear selection"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="render-panel hidden" id="renderToolbar" style="right:16px; bottom:16px;">
                <button id="smoothShading" title="Smooth shading" aria-label="Smooth shading"><i class="bi bi-circle-half"></i></button>
                <button id="wireframeToggle" title="Wireframe" aria-label="Wireframe"><i class="bi bi-bounding-box"></i></button>
                <button id="xrayToggle" title="X-ray" aria-label="X-ray"><i class="bi bi-layers"></i></button>
                <button id="gridToggle" title="Show grid" aria-label="Show grid" class="active"><i class="bi bi-grid-3x3-gap"></i></button>
                <button id="axesToggle" title="Show axes" aria-label="Show axes" class="active"><i class="bi bi-compass"></i></button>
                <button id="edgeMode" title="Edge mode" aria-label="Edge mode"><i class="bi bi-scissors"></i></button>
                <label class="render-toggle" title="SSAO">
                    <input type="checkbox" id="ssaoToggle">
                    <span>SSAO</span>
                </label>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>

</html>
